cmake_minimum_required(VERSION 3.13)
project(NimBridge)

set(PACKAGE_NAME "nim_functions")

# Include Nim compiled C files (generated by Nim compiler)
file(GLOB_RECURSE NIM_C_FILES "../../../../../../nim/cache_android/*.c")

add_library(
        ${PACKAGE_NAME}
        SHARED
        NimBridge.cpp
        nim_functions.h
        nimbase.h
        ${NIM_C_FILES}
)

# Include directories
target_include_directories(
        ${PACKAGE_NAME}
        PRIVATE
        .
        "../../../../../../nim/cache_android"
)

# Compiler flags for Nim
target_compile_definitions(${PACKAGE_NAME} PRIVATE -D_GNU_SOURCE)

# Link libraries
target_link_libraries(
        ${PACKAGE_NAME}
        android
        log
        m
)